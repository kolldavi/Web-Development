<!DOCTYPE html>

<html>
  <head>
    <title>Quote Generator</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css"

  </head>
  <body>

    <div class= "container">
      <div class="jumbotron">
        <div id="display">
            <h1 id="quote-text" class="quote-text"></h1>
            <p id="quote-author" class="quote-author"></p>
        </div>
          <hr class="my-4">
          <a id="twitter-share-button"class="btn btn-primary twitter-share-button" target="_blank">Tweet This</a>
           <button type="submit" class="btn btn-success button right" id = "new-quote"> new-quote </button>
      </div>
      <div class="footer">
          <h3><small class="text-muted">By David Koller</small></h3>
      </div>
    </div>


    <script type="text/javascript">
const display = document.getElementById('display');
const twitterBtn = document.getElementById('twitter-share-button');
const newQuoteBtn = document.getElementById('new-quote');
const quoteText = document.getElementById('quote-text');
const quoteAuthor = document.getElementById('quote-author');
const body = document.getElementsByTagName('body');
let currentQuote = '';
let currentAuthor = '';
function getRandomColor() {
	const letters = '0123456789ABCDEF'.split('');
	let color = '#';

	for (var i = 0; i < 6; i++) {
		color += letters[Math.floor(Math.random() * 16)];
	}

	return color;
}

const getQuote =  async() => {
  			quoteText.innerText = `loading data...
        
        
        `;
	      quoteAuthor.innerText ='';
      display.classList.add('new-text');
 let data = await fetch('https://andruxnet-random-famous-quotes.p.mashape.com/?cat=famous', {
		headers: {
			'X-Mashape-Key': 'VC4u68EmPnmshrbS7cVs5BZwQKiyp1zq2GAjsnAFFlbquG4ldT',
			Accept: 'application/json',
			'Content-Type': 'application/x-www-form-urlencoded'
		}
	})
		.then(response => {
			return response.json();
		})
		.then(json => {
			return json;
		})
		.catch(e => {
			return e;
		}); 

	currentQuote = data[0].quote;
	currentAuthor = data[0].author;
  	display.classList.remove('new-text')
  twitterBtn.href = `https://twitter.com/intent/tweet?hashtags=quotes&text=${currentQuote} By ${currentAuthor}`;
	quoteText.innerText = currentQuote ? currentQuote : 'error loading data';
	quoteAuthor.innerText = currentAuthor ? currentAuthor : '';
	body[0].style.backgroundColor = getRandomColor();

};

getQuote();
newQuoteBtn.addEventListener('click', getQuote);

    </script>
  </body>
</html>
